{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alepez\\\\CascadeProjects\\\\billing-system-webapp\\\\frontend\\\\frontend\\\\src\\\\SendInvoiceModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport authFetch from './authFetch';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SendInvoiceModal({\n  open,\n  onClose,\n  facture,\n  onSuccess\n}) {\n  _s();\n  const [message, setMessage] = useState('Bonjour, veuillez trouver votre facture en pièce jointe.');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n  if (!open) return null;\n  const handleSend = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setSuccess(false);\n    try {\n      const res = await authFetch(`http://localhost:5000/api/factures/${facture.id}/send_email`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message\n        })\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || 'Erreur lors de l\\'envoi du mail');\n      setSuccess(true);\n      onSuccess && onSuccess();\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      width: '100vw',\n      height: '100vh',\n      background: 'rgba(0,0,0,0.4)',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      zIndex: 9999\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'white',\n        borderRadius: 8,\n        padding: 32,\n        minWidth: 350,\n        maxWidth: 450,\n        boxShadow: '0 2px 16px rgba(0,0,0,0.15)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Envoyer la facture par mail\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSend,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 16\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Texte du mail :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 43\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: message,\n            onChange: e => setMessage(e.target.value),\n            rows: 5,\n            style: {\n              width: '100%',\n              borderRadius: 4,\n              border: '1px solid #ccc',\n              padding: 8\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red',\n            marginBottom: 8\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'green',\n            marginBottom: 8\n          },\n          children: \"Mail envoy\\xE9 avec succ\\xE8s !\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'flex-end',\n            gap: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onClose,\n            style: {\n              background: '#ccc',\n              color: '#222',\n              border: 'none',\n              borderRadius: 4,\n              padding: '6px 16px',\n              cursor: 'pointer'\n            },\n            children: \"Annuler\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            style: {\n              background: '#28a745',\n              color: 'white',\n              border: 'none',\n              borderRadius: 4,\n              padding: '6px 16px',\n              cursor: loading ? 'not-allowed' : 'pointer'\n            },\n            children: loading ? 'Envoi...' : 'Envoyer'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n}\n_s(SendInvoiceModal, \"TyhQz90IbMsr79YZXzgpqPmawOk=\");\n_c = SendInvoiceModal;\nvar _c;\n$RefreshReg$(_c, \"SendInvoiceModal\");","map":{"version":3,"names":["React","useState","authFetch","jsxDEV","_jsxDEV","SendInvoiceModal","open","onClose","facture","onSuccess","_s","message","setMessage","loading","setLoading","error","setError","success","setSuccess","handleSend","e","preventDefault","res","id","method","headers","body","JSON","stringify","data","json","ok","Error","err","style","position","top","left","width","height","background","display","alignItems","justifyContent","zIndex","children","borderRadius","padding","minWidth","maxWidth","boxShadow","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","marginBottom","value","onChange","target","rows","border","color","gap","type","onClick","cursor","disabled","_c","$RefreshReg$"],"sources":["C:/Users/alepez/CascadeProjects/billing-system-webapp/frontend/frontend/src/SendInvoiceModal.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport authFetch from './authFetch';\n\nexport default function SendInvoiceModal({ open, onClose, facture, onSuccess }) {\n  const [message, setMessage] = useState('Bonjour, veuillez trouver votre facture en pièce jointe.');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n\n  if (!open) return null;\n\n  const handleSend = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setSuccess(false);\n    try {\n      const res = await authFetch(`http://localhost:5000/api/factures/${facture.id}/send_email`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ message })\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || 'Erreur lors de l\\'envoi du mail');\n      setSuccess(true);\n      onSuccess && onSuccess();\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div style={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: 'rgba(0,0,0,0.4)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 9999 }}>\n      <div style={{ background: 'white', borderRadius: 8, padding: 32, minWidth: 350, maxWidth: 450, boxShadow: '0 2px 16px rgba(0,0,0,0.15)' }}>\n        <h2>Envoyer la facture par mail</h2>\n        <form onSubmit={handleSend}>\n          <div style={{ marginBottom: 16 }}>\n            <label>Texte du mail :</label><br />\n            <textarea value={message} onChange={e => setMessage(e.target.value)} rows={5} style={{ width: '100%', borderRadius: 4, border: '1px solid #ccc', padding: 8 }} />\n          </div>\n          {error && <div style={{ color: 'red', marginBottom: 8 }}>{error}</div>}\n          {success && <div style={{ color: 'green', marginBottom: 8 }}>Mail envoyé avec succès !</div>}\n          <div style={{ display: 'flex', justifyContent: 'flex-end', gap: 8 }}>\n            <button type=\"button\" onClick={onClose} style={{ background: '#ccc', color: '#222', border: 'none', borderRadius: 4, padding: '6px 16px', cursor: 'pointer' }}>Annuler</button>\n            <button type=\"submit\" disabled={loading} style={{ background: '#28a745', color: 'white', border: 'none', borderRadius: 4, padding: '6px 16px', cursor: loading ? 'not-allowed' : 'pointer' }}>\n              {loading ? 'Envoi...' : 'Envoyer'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}